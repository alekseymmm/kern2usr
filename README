# kern2usr
Interaction between kernelspace and userspace

Start testing:

1. Go to project directory
$ cd kern2usr

2. Run userspace part
$ ./Debug/KernUsr

Expected output:

Start polling...
timeout in polling

3. Go to kernel part directory and insert module
$ cd kern
$ insmod kern.ko

Expected output in /var/log/messages
kernel: [72254.308388] module started...
kernel: [72254.308393] Char dev with Major = 239 was created
kernel: [72254.308394] Buffer allocated

4. Create char dev
$ ../scripts/create_chdev.sh

5. Send start timer command
$ echo 3 > /sys/module/kern/parameters/cur_cmd

Output:
kernel: [68217.603486] Timer is started.
kernel: [68217.604065] Timer handler called
kernel: [68217.604067] In handler: buffer_filled = 0, calculation_done = 1
kernel: [68217.604068] Start monitoring for efd2...
kernel: [68217.604103] Buffer filled
kernel: [68217.604150] In ioctl 4096 bytes copied to user address = 0000000000aa5010 
kernel: [68217.604152] Calculcation done!!!
kernel: [68217.604153] Time for this calculation(usr)= 45876
kernel: [68217.604154] Total time (usr)= 45876
kernel: [68217.604155] Avg_time (usr) = 45876

6. Send command to stop timer and stop testing
$ echo 4 > /sys/module/kern/parameters/cur_cmd

Output:
kernel: [  260.714262] Timer is deleted.

7. Unload module 
$ rmmod kern.ko
